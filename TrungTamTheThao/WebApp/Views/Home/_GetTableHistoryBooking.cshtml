@using WebApp.Models;

@{
    List<tb_Booking> historiesBooking = ViewBag.historiesBooking as List<tb_Booking>;
}
@if (ViewBag.Error != null)
{
    <div class="alert alert-info" style="width: 40%;">@ViewBag.Error</div>
}
else
{
    <table class="table">
        <thead>
            <tr class="table-info">
                <th>STT</th>
                <th>Mã đặt phòng</th>
                <th>Tên phòng</th>
                <th>Ngày bắt đầu</th>
                <th>Ngày kết thúc</th>
                <th>Ca sử dụng</th>
                <th>Thanh toán(VNĐ)</th>
                <th>Trạng thái</th>
                <th>Thao tác</th>
            </tr>
        </thead>
        <tbody>
            @{
                int STT = 1;
                if (historiesBooking.Count <= 0)
                {
                    <tr class="table-warning"><td colspan="9">Không tìm thấy thông tin đặt phòng!</td></tr>
                }
                else
                {

                    foreach (var item in historiesBooking)
                    {

                        if (item.Status == 1)
                        {
                            <tr class="table-success">
                                <td>@STT</td>
                                <td>@item.BookingID</td>
                                <td>@item.tb_Arena.ArenaName</td>
                                <td>@item.StartTime.ToString("dd/MM/yyyy")</td>
                                <td>@item.EndTime.ToString("dd/MM/yyyy")</td>
                                <td>@item.tb_Shift.ShiftName</td>
                                <td>@item.Money</td>
                                <td>@item.StatusName</td>
                                <td><div class="btn btn-outline-danger" data-id="@item.ID" onclick="openConfirmationDialog(this)"><i class="bi bi-x-square-fill"> </i>Hủy</div></td>
                            </tr>
                        }
                        else
                        {
                            <tr class="table-danger">
                                <td>@STT</td>
                                <td>@item.BookingID</td>
                                <td>@item.tb_Arena.ArenaName</td>
                                <td>@item.StartTime.ToString("dd/MM/yyyy")</td>
                                <td>@item.EndTime.ToString("dd/MM/yyyy")</td>
                                <td>@item.tb_Shift.ShiftName</td>
                                <td>@item.Money</td>
                                <td>@item.StatusName</td>
                                <td></td>
                            </tr>
                        }

                        STT++;
                    }
                }
            }
        </tbody>
    </table>
}